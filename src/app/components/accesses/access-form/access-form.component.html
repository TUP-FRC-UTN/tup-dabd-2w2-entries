<h1 class="mt-2 p-2">Nuevo acceso</h1>
<form [formGroup]="accessForm" (ngSubmit)="onSubmit()" class="row g-3 m-2">
<h6>Ingresante</h6>
  <!-- Número de Documento -->
  <div class="col-md-6 mt-3">
    <div class="d-flex align-items-center flex-row">
      <label for="doc_number" class="form-label m-0">
        Número de Documento<label class="text-danger">*</label>
      </label>
      <input type="number" id="doc_number" class="form-control" formControlName="doc_number"
             [ngClass]="{
        'is-invalid': (accessForm.get('doc_number')?.invalid && accessForm.get('doc_number')?.touched) ||  accessForm.get('doc_number')?.hasError('unauthorized')
      }"
             (input)="onDocNumberChange($event)" />
    </div>
    <div>
      <small class="text-danger ms-2" *ngIf="accessForm.get('doc_number')?.invalid && accessForm.get('doc_number')?.touched && !accessForm.get('doc_number')?.hasError('unauthorized')">
        Requerido
      </small>
      <small class="text-danger ms-2" *ngIf="accessForm.get('doc_number')?.hasError('unauthorized')">
        Ingrese un documento registrado
      </small>
    </div>
  </div>

  <div class="col-md-6 mt-3">
    <div class="d-flex align-items-center flex-row">
      <button type="button" class="btn btn-info" (click)="isAuthorized()"
              [disabled]="checkButtonDisabled">Consultar</button>
    </div>
  </div>

  <!-- Nombre -->
  <div class="col-md-6 mt-3">
    <div class="d-flex align-items-center flex-row">
      <label for="first_name" class="form-label m-0">Nombre</label>
      <input
        type="text"
        id="first_name"
        class="form-control ms-3"
        formControlName="first_name"
      />
    </div>
    <div>
      <small class="text-danger ms-2" *ngIf="accessForm.get('first_name')?.invalid && accessForm.get('first_name')?.touched">
        requerido
      </small>
    </div>
  </div>

  <!-- Apellido -->
  <div class="col-md-6 mt-3">
    <div class="d-flex align-items-center flex-row">
      <label for="last_name" class="form-label m-0">Apellido</label>
      <input type="text" id="last_name" class="form-control ms-3" formControlName="last_name"  />
    </div>
    <div>
      <small class="text-danger ms-2" *ngIf="accessForm.get('last_name')?.invalid && accessForm.get('last_name')?.touched">
        requerido
      </small>
    </div>
  </div>

<hr>
  <h6>Detalles</h6>

  <!-- Destino -->
  <div class="col-md-6 mt-3">
    <div class="d-flex align-items-center flex-row">
      <label for="first_name" class="form-label m-0">Nro de Lote de Destino</label>
      <input
        type="text"
        id="plot_id"
        class="form-control ms-3"
        formControlName="plot_id"
      />
    </div>
  </div>

  <!-- Acción (Entrada/Salida) -->
  <div class="col-md-6 mt-3">
    <div class="d-flex align-items-center flex-row">
    <label for="action" class="form-label m-0">Acción</label><label class="text-danger">*</label>
    <select id="action" class="form-select ms-4" formControlName="action">
      <option value="ENTRY">Entrada</option>
      <option value="EXIT">Salida</option>
    </select>
    </div>
  </div>

  <!-- Tipo de Vehículo -->
  <div class="col-md-6 mt-3">
    <div class="d-flex align-items-center flex-row">
    <label for="vehicle_type" class="form-label m-0">Tipo de Vehículo<label class="text-danger">*</label></label>
    <select id="vehicle_type" class="form-select" formControlName="vehicle_type">
      <option value="CAR">Automóvil</option>
      <option value="PICKUP">Camioneta</option>
      <option value="MOTORBIKE">Motocicleta</option>
      <option value="TRUCK">Camión</option>
   <!--   <option value="FOOT">A pie / Bicicleta</option>-->
    </select>
    </div>
  </div>

  <!-- Matrícula del Vehículo -->
  <div class="col-md-6 mt-3">
    <div class="d-flex align-items-center flex-row">
      <label for="vehicle_reg" class="form-label m-0">Patente</label><label class="text-danger">*</label>
      <input type="text" id="vehicle_reg" class="form-control ms-3" formControlName="vehicle_reg"
             [ngClass]="{
        'is-invalid': accessForm.get('vehicle_reg')?.invalid && accessForm.get('vehicle_reg')?.touched
      }"/>
    </div>
    <div>
      <small class="text-danger ms-2" *ngIf="accessForm.get('vehicle_reg')?.invalid && accessForm.get('vehicle_reg')?.touched">
        Requerido
      </small>
    </div>
  </div>

  <!-- Descripción Detallada del Vehículo -->
  <div class="col-md-12 mt-3">
    <div class="d-flex align-items-center flex-row">
    <label for="vehicle_description" class="form-label m-0">Descripción del Vehículo</label>
    <textarea id="vehicle_description" class="form-control" formControlName="vehicle_description"></textarea>
    </div>
  </div>

  <!-- Comentarios -->
  <div class="col-md-12 mt-3">
    <div class="d-flex align-items-center flex-row">
    <label for="comments" class="form-label m-0">Comentarios</label>
    <textarea id="comments" class="form-control ms-3" formControlName="comments"></textarea>
    </div>
  </div>

  <div class="col-12 d-flex justify-content-end mt-5">
    <button type="button" class="btn btn-danger me-2" (click)="onCancel()">Cancelar</button>
    <button type="submit" class="btn btn-primary">Guardar</button>
  </div>
</form>
